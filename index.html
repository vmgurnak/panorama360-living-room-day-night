<!doctype html>
<html lang="ru">

<head>
   <meta charset="utf-8">
   <title>360 Panorama Day/Night</title>
   <meta name="viewport" content="width=device-width,initial-scale=1">
   <link rel="stylesheet" href="https://cdn.pannellum.org/2.5/pannellum.css" />
   <style>
      html,
      body {
         margin: 0;
         height: 100%;
         overflow: hidden;
         background: #000;
      }

      #panorama {
         width: 100%;
         height: 100vh;
      }

      /* Панель управления (справа) */
      #controls {
         position: absolute;
         top: 50%;
         right: 10px;
         transform: translateY(-50%);
         display: flex;
         flex-direction: column;
         gap: 8px;
         background: rgba(0, 0, 0, 0.3);
         padding: 8px;
         border-radius: 8px;
         z-index: 20;
      }

      #controls button {
         background: rgba(255, 255, 255, 0.8);
         border: none;
         padding: 8px;
         border-radius: 4px;
         cursor: pointer;
         font-size: 16px;
         width: 40px;
         height: 40px;
      }

      #controls button:hover {
         background: rgba(255, 255, 255, 1);
      }

      /* Панель День/Ночь */
      #dayNightControls {
         position: absolute;
         top: 10px;
         left: 10px;
         display: flex;
         flex-direction: column;
         gap: 8px;
         z-index: 20;
      }

      .dayNightControls button {
         width: 44px;
         height: 44px;
         background: rgba(255, 255, 255, 0.8);
         border: none;
         border-radius: 50%;
         cursor: pointer;
         display: flex;
         align-items: center;
         justify-content: center;
         transition: background 0.2s, transform 0.2s;
      }

      .dayNightControls button:hover {
         background: rgba(255, 255, 255, 1);
         transform: scale(1.05);
      }

      .dayNightControls svg {
         width: 22px;
         height: 22px;
         fill: #000;
      }

      /* Затемняющий слой для плавного перехода */
      #fadeLayer {
         position: absolute;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         background: rgba(0, 0, 0, 0.7);
         opacity: 0;
         pointer-events: none;
         transition: opacity 0.8s ease;
         z-index: 15;
      }
   </style>
</head>

<body>
   <div id="panorama"></div>
   <div id="fadeLayer"></div>

   <!-- Панель управления справа -->
   <div id="controls">
      <button id="up">⬆</button>
      <button id="down">⬇</button>
      <button id="left">⬅</button>
      <button id="right">➡</button>
      <button id="zoomIn">＋</button>
      <button id="zoomOut">－</button>
      <button id="fs">⛶</button>
   </div>

   <!-- Панель День/Ночь слева -->
   <div id="dayNightControls" class="dayNightControls">
      <button id="dayBtn" title="День">
         <!-- SVG солнца -->
         <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path
               d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.8 1.42-1.42zm10.48 0l1.8-1.79 1.41 1.41-1.79 1.8-1.42-1.42zM12 4V1h-1v3h1zm0 19v-3h-1v3h1zm8-9h3v-1h-3v1zm-19 0h3v-1H1v1zm15.66 6.66l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zm-11.31 0l-1.8 1.8 1.41 1.41 1.8-1.8-1.41-1.41zM12 7a5 5 0 100 10 5 5 0 000-10z" />
         </svg>
      </button>
      <button id="nightBtn" title="Ночь">
         <!-- SVG луны -->
         <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path
               d="M9.37 5.51A7 7 0 0012 19a7 7 0 006.49-9.16 0.5 0.5 0 01.72-.59A9 9 0 1111.1 4.79a0.5 0.5 0 01-.59.72c-.4.16-.78.36-1.14.6z" />
         </svg>
      </button>
   </div>

   <script src="https://cdn.pannellum.org/2.5/pannellum.js"></script>
   <script>
      const viewer = pannellum.viewer('panorama', {
         "default": {
            "firstScene": "day",
            "hfov": 100,
            "orientationOnByDefault": true,
            "showControls": false,
            "autoRotate": 0
         },
         "scenes": {
            "day": {
               "type": "equirectangular",
               "panorama": "pano_day.webp",
               "autoLoad": true
            },
            "night": {
               "type": "equirectangular",
               "panorama": "pano_night.webp"
            }
         }
      });

      const fadeLayer = document.getElementById('fadeLayer');

      function switchScene(scene) {
         fadeLayer.style.opacity = 1;
         setTimeout(() => {
            viewer.loadScene(scene);
            fadeLayer.style.opacity = 0;
         }, 600); // чуть быстрее, плавность
      }

      document.getElementById('dayBtn').onclick = () => switchScene('day');
      document.getElementById('nightBtn').onclick = () => switchScene('night');

      // Функции управления (панель справа)
      document.getElementById('up').addEventListener('click', () => viewer.setPitch(viewer.getPitch() - 10));
      document.getElementById('down').addEventListener('click', () => viewer.setPitch(viewer.getPitch() + 10));
      document.getElementById('left').addEventListener('click', () => viewer.setYaw(viewer.getYaw() - 10));
      document.getElementById('right').addEventListener('click', () => viewer.setYaw(viewer.getYaw() + 10));
      document.getElementById('zoomIn').addEventListener('click', () => viewer.setHfov(viewer.getHfov() - 10));
      document.getElementById('zoomOut').addEventListener('click', () => viewer.setHfov(viewer.getHfov() + 10));
      document.getElementById('fs').addEventListener('click', () => {
         if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
         } else {
            document.exitFullscreen();
         }
      });
   </script>
</body>

</html>